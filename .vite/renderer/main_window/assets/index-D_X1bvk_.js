(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();const a=document.querySelector(".fields"),f=MathQuill.getInterface(2);let u=0;const r=[],m=()=>{const e=document.createElement("div");e.className="field";const t=f.MathField(e);a.appendChild(e),r.push(t),t.focus()};m();const n={copyLatex:document.querySelector(".a-copy-latex"),copyImage:document.querySelector(".a-copy-image"),saveImage:document.querySelector(".a-save-image")};let s=!1;document.addEventListener("keydown",e=>{if(e.key==="Escape")r[u].focus();else if(e.key=="Enter")m();else if(e.key=="Delete"){if(r.length===1)return;const t=document.activeElement.parentElement.parentElement;if(!t)return;const i=Array.from(a.children).indexOf(t);a.removeChild(t),r.splice(i,1)}else e.key=="Control"?(s=!0,n.copyLatex.textContent="copy latex (L)",n.copyImage.textContent="copy image (I)",n.saveImage.textContent="save image (S)"):s&&(e.key=="l"&&n.copyLatex.click(),e.key=="i"&&n.copyImage.click(),e.key=="s"&&n.saveImage.click())});document.addEventListener("keyup",e=>{e.key=="Control"&&(s=!1,n.copyLatex.textContent="copy latex",n.copyImage.textContent="copy image",n.saveImage.textContent="save image")});n.copyLatex.addEventListener("click",()=>{let e=r.map(t=>t.latex()).join(`
`);navigator.clipboard.writeText(e)});n.copyImage.addEventListener("click",()=>{html2canvas(a).then(e=>{e.toBlob(t=>{navigator.clipboard.write([new ClipboardItem({"image/png":t})])})})});n.saveImage.addEventListener("click",async()=>{html2canvas(a).then(e=>{const t=e.toDataURL("image/png"),i=document.createElement("a");i.href=t,i.download="equation.png",i.click()})});
